var Mongo = require('../lib/mongo')

var mongo = new Mongo("127.0.0.1", 27017, 'test')
console.log(mongo)
var test_remove = function(err, collection) {

	collection.remove(function(err, c) {
		if (err) {
			console.log(err)
		}
		collection.insert([ {
			'a' : 1
		}, {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : {}
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} , {
			'a' : 2
		}, {
			'b' : 3
		} ], function(err, docs) {
			if (err) {
				throw (err)
			}
			collection.count(function(err, count) {
				console.log("There are " + count + " records in the test collection. Here they are:");

				collection.find(function(err, cursor) {
					cursor.each(function(err, item) {
						if (item != null) {
							console.log(item);
							console.log("created at " + new Date(item._id.generationTime) + "\n")
						}
					});
				});
			});
		})
	});
};
mongo.newCollection([ 'test_insert' ], [ test_remove ])